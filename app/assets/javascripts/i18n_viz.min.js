$(document).ready(function(){function e(a){var b=a.match(c);b.forEach(function(a,g){b[g]=a.replace(/--/g,"")});return b}var d=RegExp(/--([a-z0-9_\.]+)--/i),c=RegExp(/--([a-z0-9_\.]+)--/gi);$("body").append('<div id="i18n-viz-tooltip">...</div>').click(function(){$("#i18n-viz-tooltip").hide()});$.fn.textNodes=function(){return $(this).contents().filter(function(){try{return 3==this.nodeType}catch(a){return!1}})};$.fn.enrichWithI18nData=function(a){$(this).addClass("i18n-viz").data("i18n-keys",a).mouseenter(function(){$tooltip= $("#i18n-viz-tooltip");$(document).ready(function(){function a(f){var b=f.match(c);b.forEach(function(a,f){b[f]=a.replace(/--/g,"")});return b}var b=RegExp(/--([a-z0-9_\.]+)--/i),c=RegExp(/--([a-z0-9_\.]+)--/gi);$("body").append('<div id="i18n-viz-tooltip">...</div>').click(function(){$("#i18n-viz-tooltip").hide()});$.fn.textNodes=function(){return $(this).contents().filter(function(){try{return 3==this.nodeType}catch(a){return!1}})};$.fn.enrichWithI18nData=function(a){$(this).addClass("i18n-viz").data("i18n-keys", a).mouseenter(function(){$tooltip=$("#i18n-viz-tooltip");var b=$(this).offset().top-$tooltip.outerHeight(),c=$(this).offset().left;0>b&&(b=$(this).offset().top+$(this).height()+10);$tooltip.html("");a.forEach(function(a){i18n_viz_key_url?$tooltip.append('<a href="'+i18n_viz_key_url+a+'" target="_blank">'+a+"</a>"):$tooltip.append("<span>"+a+"</span>")});$tooltip.css({top:b,left:c}).show()})};$.extend($.expr[":"],{"i18n-el":function(a){return b.test($(a).textNodes().text())},"i18n-value":function(a){return b.test($(a).val())|| b.test($(a).attr("placeholder"))}});$(":i18n-el").each(function(){var b=$(this).text(),b=a(b);$(this).enrichWithI18nData(b);$(this).textNodes().each(function(){$(this).replaceWith($(this).text().replace(c,""))})});$("input:i18n-value").each(function(){var b=$(this).val(),d=$(this).attr("placeholder"),e=a(b+d);$(this).enrichWithI18nData(e);$(this).val(b.replace(c,""));d&&$(this).attr("placeholder",d.replace(c,""))})});var b=$(this).offset().top-$tooltip.outerHeight(),c=$(this).offset().left;0>b&&(b= $(this).offset().top+$(this).height()+10);$tooltip.html("");a.forEach(function(a){i18n_viz_key_url?$tooltip.append('<a href="'+i18n_viz_key_url+a+'" target="_blank">'+a+"</a>"):$tooltip.append("<span>"+a+"</span>")});$tooltip.css({top:b,left:c}).show()})};$.extend($.expr[":"],{"i18n-el":function(a){return d.test($(a).textNodes().text())},"i18n-value":function(a){return d.test($(a).val())||d.test($(a).attr("placeholder"))}});$(":i18n-el").each(function(){var a=$(this).text(),a=e(a);$(this).enrichWithI18nData(a); $(this).textNodes().each(function(){$(this).replaceWith($(this).text().replace(c,""))})});$("input:i18n-value").each(function(){var a=$(this).val(),b=$(this).attr("placeholder"),d=e(a+b);$(this).enrichWithI18nData(d);$(this).val(a.replace(c,""));b&&$(this).attr("placeholder",b.replace(c,""))})});